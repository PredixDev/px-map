<!-- Common imports -->
<link rel="import" href="../../polymer/polymer.html" />

<!-- Common demo imports -->
<link rel="import" href="../../px-demo/px-demo-header.html" />
<link rel="import" href="../../px-demo/px-demo-api-viewer.html" />
<link rel="import" href="../../px-demo/px-demo-footer.html" />
<link rel="import" href="../../px-demo/px-demo-configs.html" />
<link rel="import" href="../../px-demo/px-demo-props.html" />
<link rel="import" href="../../px-demo/px-demo-interactive.html" />
<link rel="import" href="../../px-demo/px-demo-component-snippet.html" />
<link rel="import" href="../../px-demo/css/px-demo-styles.html" />

<!-- Imports for this component -->
<link rel="import" href="../px-map.html" />
<link rel="import" href="../px-map-tile-layer.html" />
<link rel="import" href="../px-map-control-zoom.html" />
<link rel="import" href="../px-map-control-scale.html" />
<link rel="import" href="../px-map-control-locate.html" />
<link rel="import" href="../px-map-marker-static.html" />
<link rel="import" href="../px-map-marker-symbol.html" />
<link rel="import" href="../px-map-marker-locate.html" />
<link rel="import" href="../px-map-layer-group.html" />
<link rel="import" href="../px-map-popup-info.html" />
<link rel="import" href="../px-map-popup-data.html" />

<!-- Demo DOM module -->
<dom-module id="px-map-demo">
  <template>
  <style include="px-demo-styles" is="custom-style"></style>

  <!-- Header -->
  <px-demo-header
      module-name="px-map"
      description="The px-map component is a framework for creating maps in your application.">
  </px-demo-header>

  <!-- Interactive -->
  <px-demo-interactive>
    <!-- Configs -->
    <px-demo-configs configs="[[configs]]" props="{{props}}" chosen-config="{{chosenConfig}}"></px-demo-configs>

    <!-- Props -->
    <px-demo-props props="{{props}}" config="[[chosenConfig]]"></px-demo-props>

    <!-- Component ---------------------------------------------------------->
    <template is="dom-if" if="{{_selectedConfigIs(chosenConfig.configName, 'Basic')}}" restamp>
      <px-demo-component>
        <div style="height:400px;width:600px;display:flex">
          <px-map
            zoom="{{props.zoom.value}}"
            lat="{{props.lat.value}}"
            lng="{{props.lng.value}}"
            flex-to-size="{{props.flexToSize.value}}"
            disable-scroll-zoom="{{props.disableScrollZoom.value}}"
            disable-touch-zoom="{{props.disableScrollZoom.value}}"
            disable-dragging="{{props.disableDragging.value}}"
            attribution-prefix='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | &copy; <a href="http://osm.org/copyright">OpenStreetMap contributors</a>'>
            <px-map-tile-layer url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"></px-map-tile-layer>
          </px-map>
        </div>
      </px-demo-component>
  </template>

  <template is="dom-if" if="{{_selectedConfigIs(chosenConfig.configName, 'Advanced')}}" restamp>
    <px-demo-component>
      <div style="height:400px;width:600px;display:flex">
        <px-map
          fit-to-markers
          zoom="{{props.zoom.value}}"
          lat="{{props.lat.value}}"
          lng="{{props.lng.value}}"
          flex-to-size="{{props.flexToSize.value}}"
          disable-scroll-zoom="{{props.disableScrollZoom.value}}"
          disable-touch-zoom="{{props.disableScrollZoom.value}}"
          disable-dragging="{{props.disableDragging.value}}"
          attribution-prefix='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | &copy; <a href="http://osm.org/copyright">OpenStreetMap contributors</a>'>
          <px-map-tile-layer url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"></px-map-tile-layer>

          <px-map-control-zoom position="topright"></px-map-control-zoom>
          <px-map-control-scale position="bottomleft" imperial-units metric-units></px-map-control-scale>
          <px-map-control-locate position="bottomright" move-to-location last-found-location="{{location}}"></px-map-control-locate>

          <px-map-marker-locate lat="[[location.lat]]" lng="[[location.lng]]" accuracy="[[location.accuracy]]"></px-map-marker-locate>

          <px-map-layer-group name="Ice Cream - SF Mission District">
            <px-map-marker-static lat="37.7616534" lng="-122.4250745" type="info">
              <px-map-popup-data
                title="Bi-Rite Creamery"
                data='{ "Address" : "3692 18th St, San Francisco, CA 94110", "Website" : "biritecreamery.com", "Phone" : "(415) 626-5600", "Avg. rating" : "4.6" }'>
              </px-map-popup-data>
            </px-map-marker-static>
            <px-map-marker-static lat="37.7650501" lng="-122.4244098" type="info">
              <px-map-popup-data
                title="CREAM"
                data='{ "Address" : "3106 16th St, San Francisco, CA 94103", "Website" : "creamnation.com", "Phone" : "(415) 400-4551", "Avg. rating" : "4.3" }'>
              </px-map-popup-data>
            </px-map-marker-static>
            <px-map-marker-static lat="37.7583044" lng="-122.4237283" type="info">
              <px-map-popup-data
                title="Smitten Ice Cream"
                data='{ "Address" : "904 Valencia St, San Francisco, CA 94110", "Website" : "smittenicecream.com", "Phone" : "(415) 590-3144", "Avg. rating" : "5.0" }'>
              </px-map-popup-data>
            </px-map-marker-static>
            <px-map-marker-static lat="37.7666529" lng="-122.4177745" type="info">
              <px-map-popup-data
                title="Humphry Slocombe"
                data='{ "Address" : "2790 Harrison St A, San Francisco, CA 94110", "Website" : "humphryslocombe.com", "Phone" : "(415) 550-6971", "Avg. rating" : "4.7" }'>
              </px-map-popup-data>
            </px-map-marker-static>
          </px-map-layer-group>

          <px-map-marker-symbol lat="37.7650579" lng="-122.4218937" type="info" icon="px-obj:train">
            <px-map-popup-info title="BART: 16th St. Mission"></px-map-popup-info>
          </px-map-marker-symbol>

        </px-map>
      </div>
    </px-demo-component>
</template>
    <!-- END Component ------------------------------------------------------>

    <px-demo-component-snippet
        element-properties="{{props}}"
        element-name="px-map"
        links-includes='["px-map/px-map-tile-layer.html"]'>
    </px-demo-component-snippet>
  </px-demo-interactive>

  <!-- API Viewer -->
  <px-demo-api-viewer
    source="px-map"
    mark-private="[[apiMarkPrivate]]">
  </px-demo-api-viewer>

  <!-- Footer -->
  <px-demo-footer></px-demo-footer>
</template>
</dom-module>

  <script>
    Polymer({
      is: 'px-map-demo',

      properties: {

        /**
         * Note: The actual data/values for `props` are placed in `this.demoProps`
         * to create a static reference that Polymer shouldn't overwrite.
         *
         * @property props
         * @type {Object}
         */
        props: {
          type: Object,
          value: function(){ return this.demoProps; }
        },

        /**
         * An array of pre-configured `props` that can be used to provide the user
         * with a set of common examples. These configs will be made available
         * as a set of tabs the user can click that will automatically change
         * the `props` to specific values.
         *
         * @property configs
         * @type {Array}
         */
        configs: {
          type: Array,
          value: function(){
            return [
              { configName: "Basic",
                configReset: true },

              { configName: "Advanced",
                configReset: true,
                fitToMarkers: true,
                lightDomContent: '<px-map-tile-layer url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"></px-map-tile-layer><px-map-control-zoom position="topright"></px-map-control-zoom><px-map-control-scale position="bottomleft" imperial-units metric-units></px-map-control-scale><px-map-control-locate position="bottomright" move-to-location last-found-location="{{location}}"></px-map-control-locate><px-map-marker-locate lat="[[location.lat]]" lng="[[location.lng]]" accuracy="[[location.accuracy]]"></px-map-marker-locate><px-map-layer-group name="Ice Cream - SF Mission District"><px-map-marker-static lat="37.7616534" lng="-122.4250745" type="info"><px-map-popup-data title="Bi-Rite Creamery" data=\'{ "Address" : "3692 18th St, San Francisco, CA 94110", "Website" : "biritecreamery.com", "Phone" : "(415) 626-5600", "Avg. rating" : "4.6" }\'></px-map-popup-data></px-map-marker-static><px-map-marker-static lat="37.7650501" lng="-122.4244098" type="info"><px-map-popup-data title="CREAM" data=\'{ "Address" : "3106 16th St, San Francisco, CA 94103", "Website" : "creamnation.com", "Phone" : "(415) 400-4551", "Avg. rating" : "4.3" }\'></px-map-popup-data></px-map-marker-static></px-map-marker-static><px-map-marker-static lat="37.7583044" lng="-122.4237283" type="info"><px-map-popup-data title="Smitten Ice Cream" data=\'{ "Address" : "904 Valencia St, San Francisco, CA 94110", "Website" : "smittenicecream.com", "Phone" : "(415) 590-3144", "Avg. rating" : "5.0" }\'></px-map-popup-data></px-map-marker-static><px-map-marker-static lat="37.7666529" lng="-122.4177745" type="info"><px-map-popup-data title="Humphry Slocombe" data=\'{ "Address" : "2790 Harrison St A, San Francisco, CA 94110", "Website" : "humphryslocombe.com", "Phone" : "(415) 550-6971", "Avg. rating" : "4.7" }\'></px-map-popup-data></px-map-marker-static></px-map-layer-group><px-map-marker-symbol lat="37.7650467" lng="-122.4218885" type="info" symbol-class="fa fa-subway"><px-map-popup-info title="BART: 16th St. Mission"></px-map-popup-info></px-map-marker-symbol>'}
              ]
          }
        },

        apiMarkPrivate: {
          type: Array,
          value: function() {
            return [
              "notifyInstReady",
              "notifyInstReady",
              "canAddInst",
              "shouldAddInst",
              "addInst",
              "shouldRemoveInst",
              "removeInst",
              "shouldUpdateInst",
              "updateInst",
              "createInst",
              "getInstOptions",
              "bindEvents",
              "unbindAllEvents",
              "addProperties",
              "extendObj",
              "getShadyScope",
              "isShadyScoped"
            ]
          }
        }
      },

      /**
       * A reference for `this.props`. Read the documentation there.
       *
       * @property demoProps
       * @type {Object}
       */
      demoProps: {
        zoom: {
          type: Number,
          defaultValue: 8,
          inputType: 'text'
        },

        lat: {
          inputLabel: 'Latitude',
          type: Number,
          defaultValue: 37.7749,
          inputType: 'text'
        },

        lng: {
          inputLabel: 'Longitude',
          type: Number,
          defaultValue: -122.4312,
          inputType: 'text'
        },

        flexToSize: {
          type: Boolean,
          defaultValue: true,
          inputType: 'toggle',
          inputDisabled: true
        },

        disableScrollZoom: {
          type: Boolean,
          defaultValue: true,
          inputType: 'toggle'
        },

        disableTouchZoom: {
          type: Boolean,
          defaultValue: true,
          inputType: 'toggle'
        },

        disableDragging: {
          type: Boolean,
          defaultValue: false,
          inputType: 'toggle'
        },

        parentComponent: {
          type: Array,
          defaultValue: ['<div style="height:400px; width:600px; display:flex">','</div>']
        },

        lightDomContent: {
          type: String,
          defaultValue: '<px-map-tile-layer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"></px-map-tile-layer>'
        }
      },

      _selectedConfigIs(configName, name) {
        return configName === name;
      }

    });
  </script>
