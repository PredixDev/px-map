{"version":3,"sources":["px-map-behavior-control.es6.js"],"names":["namespace","window","PxMapBehavior","ControlImpl","properties","position","type","String","value","observer","addInst","parent","elementInst","addTo","removeInst","remove","Control","Layer","ZoomControlImpl","zoomInText","zoomOutText","createInst","options","L","control","zoom","updateInst","lastOptions","nextOptions","setPosition","getInstOptions","ZoomControl","ScaleControlImpl","imperialUnits","Boolean","metricUnits","reverseColors","PxMap","ScaleControl","setReverseColors","metric","showMetric","imperial","showImperial","klass","map","__scaleContainer","DomUtil","addClass","shouldReverse","removeClass","shouldShowImperial","_iScale","create","_update","shouldShowMetric","_mScale","Scale"],"mappings":"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","file":"px-map-behavior-control.js","sourcesContent":["(function() {\n  'use strict';\n\n  /****************************************************************************\n   * BEHAVIORS\n   ****************************************************************************/\n\n  /* Ensures the behavior namespace is created */\n  const namespace = (window.PxMapBehavior = window.PxMapBehavior || {});\n\n  /**\n   *\n   * @polymerBehavior PxMapBehavior.Control\n   */\n  const ControlImpl = {\n    properties: {\n      /**\n       * Positions the control in one of the map corners. Choose from 'topright',\n       * 'topleft', 'bottomright', or 'bottomleft'.\n       *\n       * @type {String}\n       */\n      position: {\n        type: String,\n        value: 'bottomright',\n        observer: 'shouldUpdateInst'\n      }\n    },\n\n    addInst(parent) {\n      this.elementInst.addTo(parent);\n    },\n\n    removeInst(parent) {\n      this.elementInst.remove();\n    }\n  };\n  /* Bind Control behavior */\n  namespace.Control = [\n    namespace.Layer,\n    ControlImpl\n  ];\n\n  /**\n   *\n   * @polymerBehavior PxMapBehavior.ZoomControl\n   */\n  const ZoomControlImpl = {\n    properties: {\n      /**\n       * Sets the icon for zoom in button\n       * This is not dynamic and can only be set at run time\n       *\n       * @type {String}\n       */\n      zoomInText: {\n        type: String,\n        value: '<i class=\"fa fa-plus\"></i>',\n      },\n\n      /**\n       * Sets the icon for zoom out button\n       * This is not dynamic and can only be set at run time\n       *\n       * @type {String}\n       */\n      zoomOutText: {\n        type: String,\n        value: '<i class=\"fa fa-minus\"></i>',\n      }\n    },\n\n    createInst(options) {\n      // return new PxMap.ZoomControl(options);\n      return L.control.zoom(options);\n    },\n\n    updateInst(lastOptions, nextOptions) {\n      if (lastOptions.position !== nextOptions.position) {\n        this.elementInst.setPosition(nextOptions.position);\n      }\n    },\n\n    getInstOptions() {\n      return {\n        position: this.position,\n        zoomInText: this.zoomInText,\n        zoomOutText: this.zoomOutText\n      };\n    }\n  };\n  /* Bind ZoomControl behavior */\n  namespace.ZoomControl = [\n    namespace.Control,\n    ZoomControlImpl\n  ];\n\n  /**\n   *\n   * @polymerBehavior PxMapBehavior.ScaleControl\n   */\n  const ScaleControlImpl = {\n    properties: {\n      /**\n       * Shows a imperial unit scale (ft/mi) line if enabled. Multiple unit scales\n       * can be enabled to show multiple scales. If no units are enabled,\n       * the scale cannot be drawn.\n       *\n       * @type {Boolean}\n       */\n      imperialUnits: {\n        type: Boolean,\n        value: false,\n        observer: 'shouldUpdateInst'\n      },\n\n      /**\n       * Shows a metric unit scale (m/km) line if enabled. Multiple unit scales\n       * can be enabled to show multiple scales. If no units are enabled,\n       * the scale cannot be drawn.\n       *\n       * @type {Boolean}\n       */\n      metricUnits: {\n        type: Boolean,\n        value: false,\n        observer: 'shouldUpdateInst'\n      },\n\n      /**\n       * Enable to reverse the the scale's colors, making it easier to read\n       * against a dark tile layer.\n       *\n       * @type {Boolean}\n       */\n      reverseColors: {\n        type: Boolean,\n        value: false,\n        observer: 'shouldUpdateInst'\n      }\n    },\n\n    createInst(options) {\n      return new PxMap.ScaleControl(options);\n    },\n\n    updateInst(lastOptions, nextOptions) {\n      if (lastOptions.position !== nextOptions.position) {\n        this.elementInst.setPosition(nextOptions.position);\n      }\n      if (lastOptions.reverseColors !== nextOptions.reverseColors) {\n        this.elementInst.setReverseColors(nextOptions.reverseColors);\n      }\n      if (lastOptions.metric !== nextOptions.metric) {\n        this.elementInst.showMetric(nextOptions.metric);\n      }\n      if (lastOptions.imperial !== nextOptions.imperial) {\n        this.elementInst.showImperial(nextOptions.imperial);\n      }\n    },\n\n    getInstOptions() {\n      return {\n        imperial: this.imperialUnits,\n        metric: this.metricUnits,\n        reverseColors: this.reverseColors,\n        position: this.position\n      };\n    }\n  };\n  /* Bind ScaleControl behavior */\n  namespace.ScaleControl = [\n    namespace.Control,\n    ScaleControlImpl\n  ];\n\n  /****************************************************************************\n   * KLASSES\n   ****************************************************************************/\n\n  /* Ensures the klass namespace is created */\n  const klass = (window.PxMap = window.PxMap || {});\n\n  /**\n   *\n   * @class PxMap.ScaleControl\n   */\n  class ScaleControl extends L.Control.Scale {\n    initialize(options) {\n      super.initialize(options);\n    }\n\n    onAdd(map) {\n      // Call default `onAdd` for scale to get the container\n      this.__scaleContainer = super.onAdd(map);\n\n      // Determine if we should add the reverse modifier CSS class\n      if (this.options.reverseColors === true) {\n        L.DomUtil.addClass(this.__scaleContainer, 'leaflet-control-scale--reverse');\n      }\n\n      return this.__scaleContainer;\n    }\n\n    onRemove(map) {\n      super.onRemove(map);\n\n      // Clean up scaleContainer reference\n      this.__scaleContainer = null;\n    }\n\n    /**\n     * Updates the `reverseColors` setting for the scale control. If the\n     * `shouldReverse` param doesn't match the current classes on the\n     * scale, updates the scale with the necessary classes.\n     *\n     * @param {Boolean} shouldReverse - If `true`, scale should be reversed. If `false`, it should not be.\n     */\n    setReverseColors(shouldReverse) {\n      if (!this.__scaleContainer) return;\n\n      if (shouldReverse && !this.options.reverseColors) {\n        this.options.reverseColors = true;\n        L.DomUtil.addClass(this.__scaleContainer, 'leaflet-control-scale--reverse');\n      }\n\n      if (!shouldReverse && this.options.reverseColors) {\n        this.options.reverseColors = false;\n        L.DomUtil.removeClass(this.__scaleContainer, 'leaflet-control-scale--reverse');\n      }\n    }\n\n    /**\n     * Shows or hides the imperial unit scale.\n     *\n     * @param {Boolean} shouldShowImperial - If `true`, ensures imperial unit scale is visible.\n     */\n    showImperial(shouldShowImperial) {\n      if (!this.__scaleContainer) return;\n\n      // No imperial scale exists, create one\n      if (shouldShowImperial && !this.options.imperial && !this._iScale) {\n        this._iScale = L.DomUtil.create('div', 'leaflet-control-scale-line', this.__scaleContainer);\n        this.options.imperial = true;\n      }\n\n      // We should remove the existing imperial scale\n      if (!shouldShowImperial && this.options.imperial && this._iScale) {\n        this.options.imperial = false;\n        L.DomUtil.remove(this._iScale);\n        this._iScale = null;\n      }\n\n      // Update the scale\n      this._update();\n    }\n\n    /**\n     * Shows or hides the metric unit scale.\n     *\n     * @param {Boolean} shouldShowMetric - If `true`, ensures metric unit scale is visible.\n     */\n    showMetric(shouldShowMetric) {\n      if (!this.__scaleContainer) return;\n\n      // No metric scale exists, create one\n      if (shouldShowMetric && !this.options.metric && !this._mScale) {\n        this._mScale =  L.DomUtil.create('div', 'leaflet-control-scale-line', this.__scaleContainer);\n        this.options.metric = true;\n      }\n\n      // We should remove the existing metric scale\n      if (!shouldShowMetric && this.options.metric && this._mScale) {\n        this.options.metric = false;\n        L.DomUtil.remove(this._mScale);\n        this._mScale = null;\n      }\n\n      // Update the scale\n      this._update();\n    }\n\n  };\n  /* Bind ScaleControl klass */\n  klass.ScaleControl = ScaleControl;\n\n})();\n"]}